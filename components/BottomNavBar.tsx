import { View, Text, Image, StyleSheet } from 'react-native';
import Svg, { Path } from 'react-native-svg';
import { SafeAreaView } from 'react-native-safe-area-context';
import { AirbnbColors, AirbnbFonts } from '@/constants/airbnb';

const ACTIVE_TAB = 'Voyages';

const IconExplorer = ({ color }: { color: string }) => (
  <Svg width={20} height={20} viewBox="0 0 20 20" fill="none">
    <Path d="M19.3013 18.2401L14.6073 13.547C15.9678 11.9136 16.6462 9.81853 16.5014 7.69766C16.3566 5.5768 15.3998 3.5934 13.8299 2.16007C12.26 0.726741 10.1979 -0.0461652 8.07263 0.0021347C5.94738 0.0504346 3.92256 0.916222 2.41939 2.41939C0.916222 3.92256 0.0504346 5.94738 0.0021347 8.07263C-0.0461652 10.1979 0.726741 12.26 2.16007 13.8299C3.5934 15.3998 5.5768 16.3566 7.69766 16.5014C9.81853 16.6462 11.9136 15.9678 13.547 14.6073L18.2401 19.3013C18.3098 19.371 18.3925 19.4263 18.4836 19.464C18.5746 19.5017 18.6722 19.5211 18.7707 19.5211C18.8693 19.5211 18.9669 19.5017 19.0579 19.464C19.1489 19.4263 19.2317 19.371 19.3013 19.3013C19.371 19.2317 19.4263 19.1489 19.464 19.0579C19.5017 18.9669 19.5211 18.8693 19.5211 18.7707C19.5211 18.6722 19.5017 18.5746 19.464 18.4836C19.4263 18.3925 19.371 18.3098 19.3013 18.2401ZM1.52072 8.27072C1.52072 6.9357 1.9166 5.63065 2.6583 4.52062C3.4 3.41059 4.45421 2.54543 5.68761 2.03454C6.92101 1.52364 8.27821 1.38997 9.58758 1.65042C10.897 1.91087 12.0997 2.55375 13.0437 3.49775C13.9877 4.44176 14.6306 5.64449 14.891 6.95386C15.1515 8.26323 15.0178 9.62043 14.5069 10.8538C13.996 12.0872 13.1309 13.1414 12.0208 13.8831C10.9108 14.6248 9.60575 15.0207 8.27072 15.0207C6.48112 15.0187 4.76538 14.3069 3.49994 13.0415C2.2345 11.7761 1.52271 10.0603 1.52072 8.27072Z" fill={color} />
  </Svg>
);

const IconFavoris = ({ color }: { color: string }) => (
  <Svg width={21} height={18} viewBox="0 0 21 18" fill="none">
    <Path d="M15.1875 0C13.2516 0 11.5566 0.8325 10.5 2.23969C9.44344 0.8325 7.74844 0 5.8125 0C4.27146 0.00173694 2.79404 0.614681 1.70436 1.70436C0.614681 2.79404 0.00173694 4.27146 0 5.8125C0 12.375 9.73031 17.6869 10.1447 17.9062C10.2539 17.965 10.376 17.9958 10.5 17.9958C10.624 17.9958 10.7461 17.965 10.8553 17.9062C11.2697 17.6869 21 12.375 21 5.8125C20.9983 4.27146 20.3853 2.79404 19.2956 1.70436C18.206 0.614681 16.7285 0.00173694 15.1875 0ZM10.5 16.3875C8.78813 15.39 1.5 10.8459 1.5 5.8125C1.50149 4.66921 1.95632 3.57317 2.76475 2.76475C3.57317 1.95632 4.66921 1.50149 5.8125 1.5C7.63594 1.5 9.16687 2.47125 9.80625 4.03125C9.86275 4.16881 9.95888 4.28646 10.0824 4.36926C10.2059 4.45207 10.3513 4.49627 10.5 4.49627C10.6487 4.49627 10.7941 4.45207 10.9176 4.36926C11.0411 4.28646 11.1372 4.16881 11.1937 4.03125C11.8331 2.46844 13.3641 1.5 15.1875 1.5C16.3308 1.50149 17.4268 1.95632 18.2353 2.76475C19.0437 3.57317 19.4985 4.66921 19.5 5.8125C19.5 10.8384 12.21 15.3891 10.5 16.3875Z" fill={color} />
  </Svg>
);

const IconAirbnb = ({ color }: { color: string }) => (
  <Svg width={18} height={20} viewBox="0 0 18 20" fill="none">
    <Path d="M16.6498 15.6064C16.5147 16.6097 15.8396 17.4779 14.8944 17.8637C14.4313 18.0564 13.9298 18.1144 13.4282 18.0564C12.946 17.9986 12.4636 17.8442 11.9622 17.5552C11.2676 17.1689 10.5731 16.5711 9.7629 15.6837C11.0362 14.1211 11.8076 12.6935 12.0971 11.4206C12.2322 10.8224 12.2514 10.2822 12.1936 9.78057C12.1165 9.29839 11.9429 8.85457 11.6727 8.46875C11.0747 7.60075 10.0716 7.09911 8.95272 7.09911C7.8338 7.09911 6.83071 7.62002 6.23271 8.46875C5.96252 8.85457 5.78908 9.29839 5.7118 9.78057C5.63471 10.2822 5.65398 10.8417 5.80835 11.4206C6.09762 12.6935 6.88853 14.1404 8.14253 15.7028C7.35162 16.5904 6.6378 17.1884 5.94325 17.5742C5.4418 17.8637 4.95943 18.0181 4.47725 18.0757C3.95634 18.1337 3.4547 18.0564 3.01106 17.883C2.06579 17.4971 1.3907 16.6288 1.25561 15.6257C1.19779 15.1435 1.23633 14.6613 1.42924 14.1211C1.48706 13.928 1.58361 13.7355 1.67997 13.5039C1.81506 13.1953 1.96943 12.8671 2.1236 12.5391L2.14307 12.5008C3.47397 9.62621 4.90162 6.69402 6.38708 3.83911L6.44489 3.7231C6.59926 3.43402 6.75343 3.12548 6.90799 2.83602C7.06216 2.52729 7.2358 2.23783 7.44798 1.98691C7.85307 1.52381 8.39326 1.27309 8.99126 1.27309C9.58926 1.27309 10.1294 1.52381 10.5345 1.98691C10.7467 2.23783 10.9204 2.52729 11.0747 2.83602C11.2291 3.12548 11.3833 3.43402 11.5376 3.7231L11.5956 3.83911C13.0616 6.71329 14.4893 9.64548 15.8204 12.52V12.5391C15.9747 12.8479 16.1096 13.1953 16.264 13.5039C16.3606 13.7355 16.4569 13.928 16.5147 14.1211C16.6691 14.6226 16.7269 15.1051 16.6498 15.6064ZM8.95272 14.6997C7.91108 13.388 7.2358 12.1533 7.00435 11.1119C6.90799 10.668 6.88853 10.2822 6.94653 9.93494C6.98508 9.62621 7.1009 9.35602 7.25507 9.12437C7.62162 8.60404 8.23889 8.27545 8.95272 8.27545C9.66654 8.27545 10.3031 8.58438 10.6504 9.12437C10.8045 9.35602 10.9204 9.62621 10.9589 9.93494C11.0167 10.2822 10.9974 10.6873 10.9011 11.1119C10.6696 12.1342 9.99435 13.3688 8.95272 14.6997ZM17.6529 13.6966C17.5566 13.4651 17.46 13.2144 17.3636 13.0022C17.2093 12.6551 17.0549 12.3269 16.9198 12.0182L16.9006 11.9991C15.5696 9.10529 14.142 6.17311 12.6373 3.27985L12.5795 3.16383C12.4251 2.87437 12.2707 2.56564 12.1165 2.2571C11.9234 1.90963 11.7305 1.54347 11.422 1.196C10.8045 0.424362 9.91726 0 8.97199 0C8.00744 0 7.13944 0.424362 6.50271 1.15765C6.21344 1.50473 6.00126 1.87128 5.80835 2.21875C5.65398 2.52729 5.49962 2.83602 5.34525 3.12548L5.28743 3.24092C3.80217 6.13456 2.35525 9.06694 1.02415 11.9606L1.00488 11.9991C0.869787 12.3077 0.715421 12.6355 0.561055 12.9829C0.464696 13.1953 0.368145 13.4268 0.271787 13.6775C0.0208694 14.3911 -0.0562173 15.0664 0.0401411 15.7608C0.252515 17.2077 1.21706 18.4231 2.54816 18.9631C3.04961 19.1755 3.57052 19.2719 4.11071 19.2719C4.26507 19.2719 4.45798 19.2526 4.61235 19.2331C5.24889 19.1559 5.90471 18.9441 6.54125 18.5773C7.33235 18.1337 8.08472 17.4971 8.93344 16.5711C9.78217 17.4971 10.5538 18.1337 11.3254 18.5773C11.9622 18.9441 12.618 19.1559 13.2545 19.2331C13.4089 19.2526 13.6018 19.2719 13.7562 19.2719C14.2964 19.2719 14.8364 19.1755 15.3187 18.9631C16.6691 18.4231 17.6144 17.1884 17.8266 15.7608C17.9809 15.0855 17.9036 14.4106 17.6529 13.6966Z" fill={color} />
  </Svg>
);

const IconMessages = ({ color }: { color: string }) => (
  <Svg width={20} height={18} viewBox="0 0 20 18" fill="none">
    <Path d="M18 0H1.5C1.10218 0 0.720644 0.158035 0.43934 0.43934C0.158035 0.720644 0 1.10218 0 1.5V13.5C0 13.8978 0.158035 14.2794 0.43934 14.5607C0.720644 14.842 1.10218 15 1.5 15H7.16531L8.44781 17.2444C8.57903 17.4739 8.76859 17.6646 8.99726 17.7973C9.22594 17.93 9.48562 17.9999 9.75 17.9999C10.0144 17.9999 10.2741 17.93 10.5027 17.7973C10.7314 17.6646 10.921 17.4739 11.0522 17.2444L12.3347 15H18C18.3978 15 18.7794 14.842 19.0607 14.5607C19.342 14.2794 19.5 13.8978 19.5 13.5V1.5C19.5 1.10218 19.342 0.720644 19.0607 0.43934C18.7794 0.158035 18.3978 0 18 0ZM18 13.5H11.8997C11.7669 13.4988 11.6362 13.5329 11.5209 13.5988C11.4056 13.6647 11.3098 13.76 11.2434 13.875L9.74344 16.5L8.24344 13.875C8.17704 13.76 8.08131 13.6647 7.96601 13.5988C7.85071 13.5329 7.71998 13.4988 7.58719 13.5H1.5V1.5H18V13.5Z" fill={color} />
  </Svg>
);

const tabs = [
  { label: 'Explorer', icon: (color: string) => <IconExplorer color={color} /> },
  { label: 'Favoris', icon: (color: string) => <IconFavoris color={color} /> },
  { label: 'Voyages', icon: (color: string) => <IconAirbnb color={color} /> },
  { label: 'Messages', icon: (color: string) => <IconMessages color={color} /> },
  {
    label: 'Profil',
    icon: () => (
      <Image source={require('@/assets/images/kitty.jpeg')} style={styles.profileImage} />
    ),
  },
];

export default function BottomNavBar() {
  return (
    <View style={styles.container}>
      <View style={styles.divider} />
      <SafeAreaView edges={['bottom']}>
        <View style={styles.tabRow}>
          {tabs.map((tab) => {
            const isActive = tab.label === ACTIVE_TAB;
            const color = isActive ? AirbnbColors.tabActive : AirbnbColors.tabInactive;
            return (
              <View key={tab.label} style={styles.tab}>
                <View style={styles.iconWrapper}>
                  {tab.icon(color)}
                </View>
                <Text style={[styles.label, { color }]}>{tab.label}</Text>
              </View>
            );
          })}
        </View>
      </SafeAreaView>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    backgroundColor: AirbnbColors.white,
  },
  divider: {
    height: 1,
    backgroundColor: '#E0E0E0',
  },
  tabRow: {
    flexDirection: 'row',
    paddingTop: 10,
    paddingBottom: 10,
    paddingHorizontal: 8,
  },
  tab: {
    flex: 1,
    alignItems: 'center',
    gap: 4,
  },
  iconWrapper: {
    width: 26,
    height: 26,
    alignItems: 'center',
    justifyContent: 'center',
  },
  label: {
    fontSize: AirbnbFonts.xs,
    fontWeight: AirbnbFonts.medium,
  },
  profileImage: {
    width: 26,
    height: 26,
    borderRadius: 13,
    borderWidth: 1.5,
    borderColor: AirbnbColors.lightGray,
  },
});
